import{m as l}from"./vue.7fbf5199.js";import{F as n,ax as r,r as m,Q as a,s as c,t as p,V as d,v as _,z as u,A as h,B as f,a as x,a4 as L,E as b,x as o}from"./index.8746c766.js";import{M as g}from"./Modal.1c0dbfc6.js";import{_ as k}from"./VDialog.069409f6.js";import{_ as v}from"./VContainer.f9801997.js";const w={name:"SpeedLimitModal",mixins:[g,n],props:{mode:String,hash:String},data(){return{limit:"",mdiSpeedometer:r,mdiClose:m}},computed:{...l(["getTorrent"]),torrent(){return this.getTorrent(this.hash)},isPhone(){return this.$vuetify.breakpoint.xsOnly}},async created(){switch(this.mode){case"download":if(this.isGlobal()){const s=await a.getGlobalDownloadLimit();this.limit=this.formatLimit(s)}else this.limit=this.formatLimit(this.torrent?.dl_limit);break;case"upload":if(this.isGlobal()){const s=await a.getGlobalUploadLimit();this.limit=this.formatLimit(s)}else this.limit=this.formatLimit(this.torrent?.up_limit);break}},methods:{setLimit(){switch(this.mode){case"download":this.isGlobal()?a.setGlobalDownloadLimit(this.exportLimit()):a.setDownloadLimit([this.hash],this.exportLimit());break;case"upload":this.isGlobal()?a.setGlobalUploadLimit(this.exportLimit()):a.setUploadLimit([this.hash],this.exportLimit());break}this.close()},isGlobal(){return!this.torrent},formatLimit(s){return s>0?s/1024:"\u221E"},exportLimit(){return this.limit>0?this.limit*1024:NaN},close(){this.dialog=!1}}};var C=function(){var t=this,i=t._self._c;return i(k,{attrs:{scrollable:"","content-class":"rounded-form","max-width":"500px",fullscreen:t.isPhone},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i(p,[i(d,{staticClass:"pa-0"},[i(_,{staticClass:"ma-4 primarytext--text"},[i("h3",[t._v("Limit "+t._s(t._f("titleCase")(t.mode)))])])],1),i(u,[i(v,[i(h,[i(f,[i(x,{attrs:{autofocus:"",clearable:"",label:t.$t("modals.speedLimit.speedLimit"),"prepend-inner-icon":t.mdiSpeedometer,suffix:"KB/s"},on:{focus:function(e){return e.target.select()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setLimit.apply(null,arguments)}},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1)],1)],1)],1),i(L),i(b,{staticClass:"justify-end"},[i(o,{staticClass:"accent white--text elevation-0 px-4",on:{click:t.setLimit}},[t._v(" Save ")]),i(o,{staticClass:"error white--text elevation-0 px-4",on:{click:t.close}},[t._v(" Cancel ")])],1)],1)],1)},y=[],G=c(w,C,y,!1,null,null,null,null);const F=G.exports;export{F as default};
